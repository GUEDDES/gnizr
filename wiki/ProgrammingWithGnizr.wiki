#summary Programming with gnizr Java API and how to setup a build environment
#labels Phase-Implementation

This document is intended for developers who want to write programs against gnizr Java API. 

= Introduction =

Gnizr provides a set of Java API that allows developers to create new application behavior  and to interface with gnizr data objects -- e.g., user accounts, bookmarks, links, tags and folders and RSS feeds.

Different ways to introduce new application behavior: 
  # Create new !WebWork actions or !JavaScript code that augment the existing gnizr function. 
  # Create custom implementation of gnizr interface components and inject these implementations into a gnizr installation. 
  # Create separate Java programs to manipulate the data objects stored in the gnizr database.
  # Create web mashup programs to consume RDF, JSON or RSS documents published by gnizr.

Developing third-party web mashup programs typically doesn't require special build environment setup. These programs simply read data documents from the appropriate URL published by gnizr. Creating Java programs to access data objects stored in a gnizr database or developing custom gnizr components usually will require the use of *gnizr Core API*. Adding new application behavior by creating WebWork actions usually will require the use of *gnizr Core API* and *gnizr Web Application API*. 

= Your Build Environment You Choose =

We recommend developers to setup build environment using a combination of tools: [http://maven.apache.org Maven], [http://www.eclipse.org Eclipse], [http://tomcat.apache.org Tomcat] and [http://www.mysql.com MySQL]. For the specifics on how to install and use these tools, consult their respective documentations. 

Depending which types of gnizr API you want to use, you can choose to set up your build environment in one of two ways (see below). Option 1 is suitable for building programs that only require using gnizr Core API and do not need to integrate any functions into the web application framework of gnizr. Option 2 is suitable for creating new application behaviors that will integrated into the existing web application framework. 

Here are some examples.

If you want to write a separate Java program to create new gnizr user accounts from an existing enterprise database, you can choose the first option. Your program probably will use gnizr Core API to create user account objects, and it doesn't need to be integrated into the existing gnizr web application framework. 

If you want to add a new kind of search capability in gnizr and make this capability available to all users in a gnizr installation, you should choose the second option. It's likely that your implementation will build on the web application framework of gnizr, which is a collection of WebWork actions and Freemarker template pages. To test and deploy your implementation, you will need to extend from gnizr Web Application API, add configuration to the gnizr WebWork and Spring configuration, place Freemarker template pages in the appropriate file system directories, etc.

== Option 1: Don't need to use gnizr Web Application API ==

==== Step 1: Install gnizr, Eclipse and Maven ====

Download and install a copy of the gnizr release that you want to work with. Install Eclipse IDE for writing code. Install Maven for building your program.

==== Step 2: Create a new Maven project ====

Let's assume that you are going to create a new project call `newusers`. 

  * `mvn archetype:create -DgroupId=com.myproj -DartifactId=newusers -Dpackagename=com.myproj.newusers` 

See also: [http://www.javaworld.com/javaworld/jw-12-2005/jw-1205-maven.html An Introduciton to Maven 2]

==== Step 3: Configure project's `pom.xml` ====

Setup `pom.xml` to include gnizr library dependency.

  * Repository: `http://dev.gnizr.com/maven2`
  * group ID: `com.gnizr`
  * artifact ID (gnizr Core API):
    * `gnizr-db`: gnizr database
    * `gnizr-core`: gnizr core 
    * `gnizr-delicious`: gnizr del.icio.us import API
    * `gnizr-robot`: gnizr robots

Example:

{{{
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/maven-v4_0_0.xsd">
...
<repositories>
  <repository>
    <id>gnizr-repos</id>
    <name>Gnizr Public Maven 2 Repository</name>
    <url>http://dev.gnizr.com/maven2</url>
    <layout>default</layout>
    <snapshots>
      <enabled>false</enabled>
    </snapshots>
  </repository>

  <!-- other maven repositories -->
  ...
</repositories>

<dependencies>

  <dependency>
    <groupId>com.gnizr.core</groupId>
    <artifactId>gnizr-core</artifactId>
    <!-- replace this value to the gnizr version that you want to work with -->
    <version>2.3.0-M2</version>
    <scope>compile</scope>
  </dependency>
   
  <!-- other library dependencies -->
  ...
</dependencies>
</project>

}}}

==== Step 4: Initialize Eclipse Project ====

Use Maven Eclipse plug-in to create project files for Eclipse. 

  * `mvn eclipse:eclipse`

This command should automatically downloads all necessary Maven plugins and gnizr dependencies. If you encounter errors in fetching gnizr library, [http://groups.google.com/group/gnizr-users please let us know].

==== Step 5: Open your project in Eclipse ====

  * Start Eclipse
  * Add a new project by import from the existing file system.

Done!

== Option 2: Building on gnizr Web Application API ==